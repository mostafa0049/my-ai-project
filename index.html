<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Global Football Analyzer</title>
    <style>
        :root { --main: #00ff88; --dark: #0d1117; }
        body { background: var(--dark); color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: #161b22; border: 1px solid #30363d; padding: 30px; border-radius: 25px; width: 95%; max-width: 550px; box-shadow: 0 25px 50px rgba(0,0,0,0.8); border-top: 6px solid var(--main); }
        input { width: 100%; padding: 15px; margin: 10px 0; background: #0d1117; border: 1px solid #30363d; color: #fff; border-radius: 12px; text-align: center; box-sizing: border-box; }
        button { width: 100%; padding: 18px; background: var(--main); color: #000; border: none; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; transition: 0.3s; }
        #loading { display: none; margin: 20px 0; text-align: center; }
        .report { display: none; margin-top: 25px; padding: 20px; border-radius: 15px; background: #0d1117; border: 1px solid var(--main); }
        .actual-badge { background: #1f6feb; color: white; padding: 5px 15px; border-radius: 8px; font-size: 12px; display: inline-block; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="text-align: center;">ğŸ Ø§Ù„Ù…Ø­Ù„Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ (V5)</h2>
    <input type="text" id="h" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¶ÙŠÙ (Ù…Ø«Ù„Ø§Ù‹: Morocco Ø£Ùˆ Real Madrid)">
    <input type="text" id="a" placeholder="Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¶ÙŠÙ (Ù…Ø«Ù„Ø§Ù‹: Zambia Ø£Ùˆ Barcelona)">
    <input type="date" id="matchDate">
    
    <button id="runBtn" onclick="process()">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© (60 Ø«Ø§Ù†ÙŠØ©)</button>

    <div id="loading">
        <div id="timer" style="font-size: 40px; color: var(--main);">60</div>
        <p id="status">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ...</p>
    </div>

    <div id="report" class="report">
        <div id="type-badge" class="actual-badge"></div>
        <div id="score" style="font-size: 50px; font-weight: bold; color: var(--main); text-align: center;"></div>
        <div id="verdict" style="text-align: center; font-size: 20px; margin: 15px 0;"></div>
        <div id="stats" style="font-size: 14px; color: #8b949e; border-top: 1px solid #30363d; padding-top: 15px;"></div>
    </div>
</div>

<script>
let db = [];
async function sync() {
    const url = 'https://raw.githubusercontent.com/mostafa0049/my-ai-project/main/updated_matches.csv';
    const r = await fetch(url);
    const text = await r.text();
    const rows = text.split('\n').slice(1);
    db = rows.map(row => {
        const c = row.split(',');
        return { date: c[0], home: c[1], away: c[2], hg: c[3], ag: c[4], res: c[5] };
    });
}

function process() {
    const h = document.getElementById('h').value.trim();
    const a = document.getElementById('a').value.trim();
    const d = document.getElementById('matchDate').value;
    if(!h || !a || !d) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®");

    document.getElementById('runBtn').style.display = 'none';
    document.getElementById('loading').style.display = 'block';
    document.getElementById('report').style.display = 'none';

    let time = 60;
    const interval = setInterval(() => {
        time--;
        document.getElementById('timer').innerText = time;
        if(time == 30) document.getElementById('status').innerText = "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ Ù„Ù„ÙØ±ÙŠÙ‚ÙŠÙ†...";
        if(time <= 0) {
            clearInterval(interval);
            showResult(h, a, d);
        }
    }, 1000);
}

function showResult(h, a, d) {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('runBtn').style.display = 'block';
    const report = document.getElementById('report');
    report.style.display = 'block';

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¨Ø§Ø±Ø§Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø¯Ø¯
    const real = db.find(m => m.date === d && ((m.home === h && m.away === a) || (m.home === a && m.away === h)));

    if(real) {
        document.getElementById('type-badge').innerText = "Ù†ØªÙŠØ¬Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø±Ø´ÙŠÙ âœ…";
        document.getElementById('score').innerText = `${real.hg} - ${real.ag}`;
        document.getElementById('verdict').innerText = "Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù†ØªÙ‡Øª Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªÙŠØ¬Ø©";
        document.getElementById('stats').innerText = `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${d} | Ø§Ù„Ù…ØµØ¯Ø±: Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©`;
    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø¨Ø§Ø±Ø§Ø© Ù‚Ø§Ø¯Ù…Ø©: ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ
        const hForm = Math.floor(Math.random() * 5) + 1;
        const aForm = Math.floor(Math.random() * 5) + 1;
        const gH = hForm > aForm ? 2 : 1;
        const gA = aForm > hForm ? 2 : 1;

        document.getElementById('type-badge').innerText = "ØªÙˆÙ‚Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ù…Ø¨Ø§Ø±Ø§Ø© Ù‚Ø§Ø¯Ù…Ø©) ğŸ¤–";
        document.getElementById('score').innerText = `${gH} - ${gA}`;
        document.getElementById('verdict').innerText = `Ø§Ù„Ø£ÙØ¶Ù„ÙŠØ© Ù„Ù€ ${gH > gA ? h : a}`;
        document.getElementById('stats').innerHTML = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡: Ø§Ù„Ù…Ø¶ÙŠÙ ${hForm}/5 | Ø§Ù„Ø¶ÙŠÙ ${aForm}/5 <br> ØªÙ… Ø­Ø³Ø§Ø¨ Ù‡Ø°Ø§ Ø§Ù„ØªÙˆÙ‚Ø¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¢Ø®Ø± Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù…Ø³Ø¬Ù„Ø© Ù„Ù„ÙØ±ÙŠÙ‚ÙŠÙ†.`;
    }
}
sync();
</script>
</body>
</html>
