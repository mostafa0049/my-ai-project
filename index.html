<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ù„Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ¹Ù„ÙŠ 2025-2026</title>
    <style>
        :root { --primary: #00ff88; --bg: #0d1117; --card: #161b22; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: var(--card); border: 1px solid #30363d; padding: 30px; border-radius: 20px; width: 95%; max-width: 500px; box-shadow: 0 20px 50px rgba(0,0,0,0.6); }
        .input-group { display: flex; gap: 10px; margin-bottom: 15px; }
        input { width: 100%; padding: 15px; background: #0d1117; border: 1px solid #30363d; color: #fff; border-radius: 12px; text-align: center; font-size: 16px; outline: none; }
        input:focus { border-color: var(--primary); }
        button { width: 100%; padding: 18px; background: var(--primary); color: #000; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 18px; transition: 0.3s; }
        #loading-box { display: none; text-align: center; margin: 20px 0; }
        .timer { font-size: 45px; color: var(--primary); font-weight: bold; }
        #report { display: none; margin-top: 25px; padding: 20px; border-radius: 15px; background: #0d1117; border-top: 4px solid var(--primary); }
        .stat-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 14px; border-bottom: 1px solid #30363d; padding-bottom: 5px; }
        .actual-score { font-size: 50px; font-weight: bold; color: var(--primary); text-align: center; margin: 15px 0; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="text-align: center; margin-bottom: 25px;">ğŸ“Š Ù…Ø­Ù„Ù„ Ù…ÙˆØ³Ù… 2025-2026</h2>
    
    <div class="input-group">
        <input type="text" id="homeT" placeholder="Ø§Ù„Ù…Ø¶ÙŠÙ (Ù…Ø«Ù„Ø§Ù‹: Liverpool)">
        <input type="text" id="awayT" placeholder="Ø§Ù„Ø¶ÙŠÙ (Ù…Ø«Ù„Ø§Ù‹: Arsenal)">
    </div>
    <input type="date" id="matchD" style="width: 100%; box-sizing: border-box; margin-bottom: 20px;">

    <button id="runBtn" onclick="startAnalysis()">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ¹Ù„ÙŠ (60 Ø«Ø§Ù†ÙŠØ©)</button>

    <div id="loading-box">
        <div class="timer" id="count">60</div>
        <p id="status" style="color: #8b949e;">Ø¬Ø§Ø±ÙŠ Ø³Ø­Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙˆØ³Ù… 2025 Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©...</p>
    </div>

    <div id="report">
        <div style="text-align: center; font-size: 12px; color: var(--primary);" id="leagueName"></div>
        <div class="actual-score" id="finalScore">0 - 0</div>
        <div id="verdict" style="text-align: center; font-weight: bold; margin-bottom: 20px;"></div>
        
        <div class="stat-row"><span>ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù‡Ø¬ÙˆÙ… (Ø§Ù„Ù…Ø¶ÙŠÙ)</span><span id="hAtt">0%</span></div>
        <div class="stat-row"><span>ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù‡Ø¬ÙˆÙ… (Ø§Ù„Ø¶ÙŠÙ)</span><span id="aAtt">0%</span></div>
        <div class="stat-row"><span>Ù†Ù‚Ø§Ø· Ø§Ù„Ø´ÙƒÙ„ (Ø¢Ø®Ø± 5 Ù…Ø¨Ø§Ø±ÙŠØ§Øª)</span><span id="formPts">0 vs 0</span></div>
    </div>
</div>

<script>
let database = [];

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙˆØ± ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
async function loadDB() {
    const url = 'https://raw.githubusercontent.com/mostafa0049/my-ai-project/main/updated_matches.csv';
    try {
        const r = await fetch(url);
        const t = await r.text();
        const rows = t.split('\n').slice(1);
        database = rows.map(row => {
            const c = row.split(',');
            return { date: c[0], home: c[1], away: c[2], hg: parseInt(c[3]), ag: parseInt(c[4]), res: c[5], league: c[6] };
        });
    } catch (e) { console.error("Database Load Error"); }
}

function startAnalysis() {
    const h = document.getElementById('homeT').value.trim();
    const a = document.getElementById('awayT').value.trim();
    if(!h || !a) return alert("Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±Ù‚ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©");

    document.getElementById('runBtn').style.display = 'none';
    document.getElementById('loading-box').style.display = 'block';
    document.getElementById('report').style.display = 'none';

    let time = 60;
    const interval = setInterval(() => {
        time--;
        document.getElementById('count').innerText = time;
        if(time == 30) document.getElementById('status').innerText = "Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ù„Ù…ÙˆØ³Ù… 2025-2026...";
        if(time <= 0) {
            clearInterval(interval);
            document.getElementById('loading-box').style.display = 'none';
            document.getElementById('runBtn').style.display = 'block';
            runLogic(h, a);
        }
    }, 1000);
}

function runLogic(h, a) {
    // ÙÙ„ØªØ±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ÙØ±ÙŠÙ‚ÙŠÙ†
    const hMatches = database.filter(m => m.home === h || m.away === h).slice(-5);
    const aMatches = database.filter(m => m.home === a || m.away === a).slice(-5);

    const getStats = (matches, team) => {
        let goals = 0, pts = 0;
        matches.forEach(m => {
            const isHome = m.home === team;
            goals += isHome ? m.hg : m.ag;
            if((isHome && m.res === 'H') || (!isHome && m.res === 'A')) pts += 3;
            else if(m.res === 'D') pts += 1;
        });
        return { avg: goals / (matches.length || 1), pts: pts };
    };

    const hStat = getStats(hMatches, h);
    const aStat = getStats(aMatches, a);

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„ÙØ¹Ù„ÙŠ
    const finalH = Math.round(hStat.avg);
    const finalA = Math.round(aStat.avg);

    document.getElementById('report').style.display = 'block';
    document.getElementById('finalScore').innerText = `${finalH} - ${finalA}`;
    document.getElementById('leagueName').innerText = hMatches.length > 0 ? hMatches[0].league : "Ù…ÙˆØ³Ù… 2025-2026";
    document.getElementById('hAtt').innerText = (hStat.avg * 40).toFixed(0) + "%";
    document.getElementById('aAtt').innerText = (aStat.avg * 40).toFixed(0) + "%";
    document.getElementById('formPts').innerText = `${hStat.pts} vs ${aStat.pts} (Ù…Ù† 15)`;
    document.getElementById('verdict').innerText = finalH > finalA ? `Ø§Ù„Ø£ÙØ¶Ù„ÙŠØ© Ø§Ù„ÙÙ†ÙŠØ©: ÙÙˆØ² ${h}` : (finalA > finalH ? `Ø§Ù„Ø£ÙØ¶Ù„ÙŠØ© Ø§Ù„ÙÙ†ÙŠØ©: ÙÙˆØ² ${a}` : "ØªØ¹Ø§Ø¯Ù„ Ù…Ù†Ø·Ù‚ÙŠ");
}

loadDB();
</script>
</body>
</html>
